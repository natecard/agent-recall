llm:
  provider: anthropic
  model: claude-sonnet-4-20250514

compaction:
  backend: llm
  max_recent_tokens: 1500
  max_tier_tokens: 10000
  max_sessions_before_compact: 5
  promote_pattern_after_occurrences: 3
  index_decision_entries: true
  index_decision_min_confidence: 0.7
  index_exploration_entries: true
  index_exploration_min_confidence: 0.7
  index_narrative_entries: false
  index_narrative_min_confidence: 0.8
  archive_sessions_older_than_days: 30

tier_compaction:
  auto_run: true
  max_entries_per_tier: 50
  strict_deduplication: false
  summary_threshold_entries: 40
  summary_max_entries: 20

retrieval:
  backend: fts5
  top_k: 5
  fusion_k: 60
  rerank_enabled: false
  rerank_candidate_k: 20
  embedding_enabled: false
  embedding_dimensions: 64

storage:
  backend: local
  shared:
    base_url: null
    api_key_env: AGENT_RECALL_SHARED_API_KEY
    require_api_key: false
    role: writer
    allow_promote: true
    audit_enabled: true
    audit_actor: system
    timeout_seconds: 10.0
    retry_attempts: 2

theme:
  name: dark+

tui:
  terminal_panel_visible: false

ralph:
  enabled: false
  coding_cli: null
  cli_model: null
  max_iterations: 10
  sleep_seconds: 2
  compact_mode: always
  cost_budget_usd:
  selected_prd_ids: null
  notifications:
    enabled: false
    events:
      - iteration_complete
      - validation_failed
      - loop_finished
  forecast:
    window: 5
    use_llm: false
    llm_on_consecutive_failures: 2
    llm_model: null
  synthesis:
    auto_after_loop: true
    max_guardrails: 30
    max_style: 30

adapters:
  enabled: false
  output_dir: .agent/context
  token_budget:
  per_adapter_token_budget: {}
  per_provider_token_budget: {}
  per_model_token_budget: {}
